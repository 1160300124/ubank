<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!--
	namespace：必须与对应的接口全类名一致
	id:必须与对应接口的某个对应的方法名一致

 -->
<mapper namespace="com.ulaiber.web.dao.ReimbursementDao">
    <resultMap id="LeaveRecordMap" type="com.ulaiber.web.model.LeaveRecord" >
        <id property="id" column="id" jdbcType="BIGINT" />
    </resultMap>

    <!--新增申请记录-->
    <insert id="insertRecord" parameterType="com.ulaiber.web.model.LeaveRecord" useGeneratedKeys="true" keyProperty="id" >
        INSERT INTO tbl_leave_record (userid,auditor,reason,createDate,status,disable,type)
            VALUES (#{userid},#{auditor},#{reason},#{createDate},'0','0','2')
    </insert>

    <!--新增报销记录-->
    <insert id="insertReim" parameterType="java.util.List" >
        INSERT INTO tbl_reimbursement (recordNo,type,start,end,amount,remark,images)  VALUES
        <foreach collection="list" item="items" index= "index" separator =",">
            (#{items.recordNo},#{items.type},#{items.start},#{items.end},#{items.amount},#{items.remark},#{items.images})
        </foreach>
    </insert>

    <!--根据申请记录ID，获取报销记录-->
    <select id="queryReimbersement" parameterType="int" resultType="com.ulaiber.web.model.Reimbursement">
        select * FROM tbl_reimbursement where recordNo = #{recordNo}
    </select>
</mapper>